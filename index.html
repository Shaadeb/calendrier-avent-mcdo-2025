<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Calendrier de l'Avent</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: "Helvetica Neue", Arial, sans-serif;
        background: #b01618 url('logo-mcdonalds.png') no-repeat -9999px; /* hack pour Chrome */
        overflow-x: hidden;
    }

    /* fond neige rouge */
    body::before {
        content: "";
        position: fixed;
        inset: 0;
        background: url('https://i.imgur.com/4fF3YYC.png');
        background-size: cover;
        z-index: -1;
        opacity: 1;
    }

    h1 {
        text-align: center;
        color: white;
        font-size: 2.4rem;
        margin-top: 40px;
        font-weight: 700;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    h2 {
        text-align: center;
        color: #f7d77e;
        margin-top: -10px;
        font-size: 1.2rem;
        font-weight: bold;
    }

    .calendar {
        max-width: 900px;
        margin: 40px auto;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 18px;
        padding: 0 20px;
    }

    .day {
        background: white;
        border-radius: 18px;
        text-align: center;
        padding: 25px 0;
        font-size: 2.3rem;
        font-weight: 700;
        color: #d4af37;
        cursor: pointer;
        position: relative;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        user-select: none;
    }

    .day.locked {
        background: #ffffffcc;
        filter: grayscale(1);
        cursor: not-allowed;
    }

    .day.special24 {
        background: #d4af37;
        color: white;
    }

    /* pop-up */
    .popup-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.7);
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    .popup {
        background: white;
        padding: 0;
        border-radius: 16px;
        max-width: 380px;
        width: 90%;
        position: relative;
        overflow: hidden;
    }

    .popup img {
        width: 100%;
        display: block;
    }

    .close-popup {
        position: absolute;
        top: 12px;
        right: 12px;
        background: black;
        color: white;
        border: none;
        font-size: 16px;
        cursor: pointer;
        padding: 5px 10px;
        border-radius: 6px;
    }

    /* Mode test */
    .test-bar {
        position: fixed;
        top: 10px;
        right: 10px;
        background: white;
        padding: 10px 15px;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        z-index: 9000;
        font-size: 14px;
    }

    footer {
        text-align: center;
        margin: 40px 0;
        color: white;
        font-size: 0.9rem;
        opacity: 0.8;
    }

</style>
</head>

<body>

<!-- Bouton TEST -->
<div class="test-bar">
    Mode test : 
    <select id="testDate">
        <option value="">-- Désactivé --</option>
        <option value="2025-12-09">9 déc</option>
        <option value="2025-12-10">10 déc</option>
        <option value="2025-12-11">11 déc</option>
        <option value="2025-12-12">12 déc</option>
        <option value="2025-12-13">13 déc</option>
        <option value="2025-12-14">14 déc</option>
        <option value="2025-12-15">15 déc</option>
        <option value="2025-12-16">16 déc</option>
        <option value="2025-12-17">17 déc</option>
        <option value="2025-12-18">18 déc</option>
        <option value="2025-12-19">19 déc</option>
        <option value="2025-12-20">20 déc</option>
        <option value="2025-12-21">21 déc</option>
        <option value="2025-12-22">22 déc</option>
        <option value="2025-12-23">23 déc</option>
        <option value="2025-12-24">24 déc</option>
    </select>
</div>

<h1>Calendrier de l'Avent</h1>
<h2>Découvrez des offres exclusives chaque jour !</h2>

<!-- Disposition EXACTE de ton visuel -->
<div class="calendar">
    <div class="day" data-day="10">10</div>
    <div class="day" data-day="22">22</div>
    <div class="day" data-day="18">18</div>
    <div class="day" data-day="15">15</div>

    <div class="day" data-day="17">17</div>
    <div class="day" data-day="14">14</div>
    <div class="day" data-day="21">21</div>
    <div class="day" data-day="20">20</div>

    <div class="day" data-day="12">12</div>
    <div class="day" data-day="19">19</div>
    <div class="day" data-day="23">23</div>
    <div class="day" data-day="16">16</div>

    <div class="day" data-day="11">11</div>
    <div class="day" data-day="9">9</div>
    <div class="day" data-day="13">13</div>
    <div class="day special24" data-day="24">24</div>
</div>

<footer>
    Offres valables dans les restaurants d’Amiens Centre-Ville, Amiens Glisy, Montdidier et Breteuil — © McDonald’s™ 2025  
</footer>

<!-- POPUP -->
<div class="popup-overlay" id="popupOverlay">
    <div class="popup">
        <button class="close-popup" onclick="closePopup()">✕</button>
        <img id="popupImg" src="">
    </div>
</div>

<script>
/* tableau final validé */
const offers = {
    9:  "09_12.png",
    10: "09_12 (3).png",
    11: "09_12 (4).png",
    12: "09_12 (5).png",
    13: "09_12 (6).png",
    14: "09_12 (7).png",
    15: "09_12 (8).png",
    16: "09_12 (9).png",
    17: "09_12 (10).png",
    18: "09_12 (11).png",
    19: "09_12 (12).png",
    20: "09_12 (13).png",
    21: "09_12 (14).png",
    22: "09_12 (15).png",
    23: "09_12 (16).png",
    24: "24_12.png"
};

const futureImg = "09_12 (2).png";
const expiredImg = "offre-expiree.png";

function getToday() {
    const test = document.getElementById("testDate").value;
    return test ? new Date(test+"T00:00:00") : new Date();
}

function openPopup(src) {
    document.getElementById("popupImg").src = src;
    document.getElementById("popupOverlay").style.display = "flex";
}

function closePopup() {
    document.getElementById("popupOverlay").style.display = "none";
}

document.querySelectorAll(".day").forEach(day => {
    day.addEventListener("click", () => {
        const number = parseInt(day.dataset.day);
        const today = getToday();
        const offerDate = new Date(`2025-12-${String(number).padStart(2,'0')}T00:00:00`);

        if (today < offerDate) {
            openPopup(futureImg);
            return;
        }

        if (today > offerDate) {
            openPopup(expiredImg);
            return;
        }

        openPopup(offers[number]);
    });
});
</script>

</body>
</html>
