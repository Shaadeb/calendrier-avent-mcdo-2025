<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Calendrier de l'Avent 2025</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ------------------- RESET -------------------- */
body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
}

/* ------------------- FOND --------------------- */
body {
    background: url("calendrier-fond.png") no-repeat top center;
    background-size: cover;
    min-height: 100vh;
    text-align: center;
    color: white;
}

/* ------------------- MODE TEST --------------------- */
#testBar {
    background: #d60000;
    padding: 10px;
    font-weight: bold;
    position: sticky;
    top: 0;
    z-index: 9999;
    display: none;
}
#testControls {
    margin-top: 8px;
}
button {
    background: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
}

/* ------------------- GRILLE --------------------- */
.grid {
    width: 90%;
    max-width: 900px;
    margin: 180px auto 60px auto;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 18px;
}

.case {
    background: rgba(255,255,255,0);
    cursor: pointer;
}

/* ------------------- POPUP --------------------- */
#popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.75);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 999999;
}
.popup-content {
    background: white;
    padding: 10px;
    border-radius: 10px;
    width: 90%;
    max-width: 380px;
    text-align: center;
}
.popup-content img {
    width: 100%;
}
.close-btn {
    background: #d60000;
    color: white;
    margin-top: 10px;
}

/* ------------------- FOOTER --------------------- */
footer {
    margin-top: 30px;
    font-size: 12px;
    padding-bottom: 40px;
}
</style>
</head>

<body>

<!-- MODE TEST -->
<div id="testBar">
    MODE TEST — Date simulée : <span id="simDate">9</span> décembre
    <div id="testControls">
        <button onclick="prevDay()">◀</button>
        <button onclick="nextDay()">▶</button>
        <button onclick="disableTest()">Désactiver test</button>
    </div>
</div>

<button onclick="enableTest()" style="position:fixed;top:10px;right:10px;z-index:999;">Activer mode test</button>

<!-- ------------------- GRILLE ------------------- -->
<div class="grid">

    <!-- IMPORTANT : ordre EXACT comme ton image -->
    <img class="case" data-day="10" src="case10.png">
    <img class="case" data-day="22" src="case22.png">
    <img class="case" data-day="18" src="case18.png">
    <img class="case" data-day="15" src="case15.png">

    <img class="case" data-day="17" src="case17.png">
    <img class="case" data-day="14" src="case14.png">
    <img class="case" data-day="21" src="case21.png">
    <img class="case" data-day="20" src="case20.png">

    <img class="case" data-day="12" src="case12.png">
    <img class="case" data-day="19" src="case19.png">
    <img class="case" data-day="23" src="case23.png">
    <img class="case" data-day="16" src="case16.png">

    <img class="case" data-day="11" src="case11.png">
    <img class="case" data-day="9"  src="case9.png">
    <img class="case" data-day="13" src="case13.png">
    <img class="case" data-day="24" src="case24.png">

</div>

<!-- POPUP -->
<div id="popup">
    <div class="popup-content">
        <img id="popupImg" src="">
        <p id="popupLegal"></p>
        <button class="close-btn" onclick="closePopup()">Fermer</button>
    </div>
</div>

<footer>
    Offres valables dans les restaurants d’Amiens Centre-ville, Amiens Glisy, Montdidier et Breteuil — © McDonald’s™ 2025
</footer>

<script>
/* ---------------- LOGIQUE DATES ---------------- */
const today = new Date();
let testMode = false;
let testDay = 9;

/* ---------------- OFFRES ---------------- */
const OFFERS = {
    9:  "09_12.png",
    10: "09_12 (3).png",
    11: "09_12 (8).png",
    12: "09_12 (14).png",
    13: "09_12 (11).png",
    14: "09_12 (4).png",
    15: "09_12 (7).png",
    16: "09_12 (9).png",
    17: "09_12 (5).png",
    18: "09_12 (6).png",
    19: "09_12 (15).png",
    20: "09_12 (10).png",
    21: "09_12 (12).png",
    22: "09_12 (3).png",
    23: "09_12 (16).png",
    24: "24_12.png"
};

function getCurrentDay() {
    return testMode ? testDay : today.getDate();
}

/* ---------------- MENTIONS ---------------- */
function legal(day) {
    if (day == 16 || day == 24) {
        return "Offre valable sur présentation de cette case au comptoir.";
    }
    return "Disponible via l’onglet \"Avantages\" en borne, au comptoir, au McDrive™ ou sur l’application McDo+.";
}

/* ---------------- POPUP ---------------- */
function openPopup(day) {
    const now = getCurrentDay();

    let img = "";
    if (now < day) img = "09_12 (2).png";
    else if (now > day) img = "offre-expiree.png";
    else img = OFFERS[day];

    document.getElementById("popupImg").src = img;
    document.getElementById("popupLegal").innerText = legal(day);

    document.getElementById("popup").style.display = "flex";
}
function closePopup() {
    document.getElementById("popup").style.display = "none";
}

/* ---------------- CLICS CASES ---------------- */
document.querySelectorAll(".case").forEach(c => {
    c.onclick = () => openPopup(parseInt(c.dataset.day));
});

/* ---------------- MODE TEST ---------------- */
function enableTest() {
    testMode = true;
    document.getElementById("testBar").style.display = "block";
}
function disableTest() {
    testMode = false;
    document.getElementById("testBar").style.display = "none";
}
function nextDay() {
    if (testDay < 24) testDay++;
    document.getElementById("simDate").innerText = testDay;
}
function prevDay() {
    if (testDay > 9) testDay--;
    document.getElementById("simDate").innerText = testDay;
}
</script>

</body>
</html>
